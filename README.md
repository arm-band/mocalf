# mocalf.js

mocalf.jsは表形式のカレンダーを作成し、モーダルウインドウで表示するjQueryプラグインです。  
mocalf.js is a jQuery plugin for creating calendars in table format and showing at modal window.

## About mocalf.js

mocalf.jsは、モーダルウインドウでFlexboxによる表形式のカレンダーを表示させるjQueryプラグインです。  
名前は「もーかるえふ」あるいは「もーかるふ」とお読みください。

## Function

- モーダルウインドウ形式でカレンダーを表示。
- カレンダーはtableタグではなく、ul, liタグをFlexboxで制御しています。
- 表示する月の数を制御できます（2ヶ月分など）。
- タイトルが指定できます。例：「混雑予想カレンダー」。
- 各日付に4段階の状態を指定できます。例えば、「休み、空いている、ほどほど混雑、非常に混雑」といった感じです。
- jsonファイルを別途用意することで、各日付に状態を指定できます。例えば、「今月の10日は祝日なので休み、翌11日は休み明けなので非常に混雑する」のような臨機応変な対応が可能です。
- 上記とは別に、各曜日にデフォルトの状態を指定できます。例えば、「日曜日は必ず休み。翌月曜日は非常に混雑」といった具合です。このデフォルト設定を行えば、jsonファイルによる指定は最小限で済みます。
- 状態に表示する文字・アイコンはHTMLで指定可能です。「休み、空、混、大」といった文字や「休み、◯、△、×」といったマークのほか、別途Font Awesomeを読み込んでそのアイコンを指定することもできます。
- フッタに説明のhtmlを入れられます。上記アイコンを指定した場合、「◯：空いている、△：ほどほどに混雑」といった注釈などに活用ください。
- 閉じるボタンの文字を変更可能。フッタ部分に「閉じる」ボタンを付与しますが、そのボタンの文字は変更可能です。

## Demo

<a href="https://arm-band.github.io/mocalf/">Demo page</a>

## Usage

1. ダウンロードしたzipを解凍し、js、cssをHTMLに読み込ませてください（jQueryは必須なので、jQueryも読み込ませてください。）
2. HTMLにモーダルウインドウのベースと、モーダルウインドウを開くためのボタンを記述してください（詳細下記）
3. 表示させるカレンダーの内容となるjsonを用意してください
4. Javascriptに、mocalf.jsを動作させるためのスクリプトを記述してください（詳細下記）
5. 動作内容を確認してください

使用方法2.の通り、HTMLにモーダルウインドウのベースとなる空divタグと、モーダルウインドウを開くためのボタンを記述します。
<pre><code>
&lt;!-- カレンダーを開くためのボタン。id必須。 --&gt;
&lt;button type="button" id="modal_open"&gt;カレンダーを開く&lt;/button&gt;

&lt;!-- モーダルウインドウのベースとなる空divタグ。class、id必須。 --&gt;
&lt;div class="modalcal modalcal_hide" id="modal"&gt;&lt;/div&gt;
</code></pre>

次にJavascriptを記述します。

<pre><code>
$("#modal").mocalf(); //上記の空divタグのidをセレクタとして指定
</code></pre>

## Options

オプションとして指定できる項目は以下の通りです。
<table>
	<thead>
		<tr>
			<th>パラメータ名</th>
			<th>説明</th>
			<th>指定可能な形式</th>
			<th>デフォルト値</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>open</td>
			<td>モーダルウインドウを開くボタンの指定</td>
			<td>テキスト（セレクタ）</td>
			<td>#modal_open</td>
		</tr>
		<tr>
			<td>title</td>
			<td>カレンダーのヘッダに表示されるタイトル</td>
			<td>テキスト</td>
			<td>混雑予想カレンダー</td>
		</tr>
		<tr>
			<td>month</td>
			<td>表示する月の数。<br>
			※jsonのキー数と一致させてください</td>
			<td>数値</td>
			<td>1</td>
		</tr>
		<tr>
			<td>status</td>
			<td>曜日ごとのデフォルトの混雑状況</td>
			<td>配列</td>
			<td>["休", "大", "混", "空", "混", "混", "大"]</td>
		</tr>
		<tr>
			<td>flag</td>
			<td>4段階ある混雑状況のフラグとして使う文字。<br>
			※statusの指定、jsonの各日付ごとの値と一致させてください</td>
			<td>配列</td>
			<td>["休", "空", "混", "大"]</td>
		</tr>
        <tr>
			<td>icon</td>
			<td>カレンダー中に表示させる文字・アイコンの指定</td>
			<td>配列</td>
			<td>["休み", "空", "混", "大"]</td>
		</tr>
		<tr>
			<td>data</td>
			<td>各日付で別個に混雑状況を指定するjsonファイルのパス</td>
			<td>テキスト</td>
			<td>./data/data.json</td>
		</tr>
		<tr>
			<td>footer</td>
			<td>フッタの中に表示させるテキスト</td>
			<td>テキスト（HTML可）</td>
			<td>（なし）</td>
		</tr>
		<tr>
			<td>close</td>
			<td>フッタの閉じるボタンに表示するテキスト</td>
			<td>テキスト</td>
			<td>閉じる</td>
		</tr>
	</tbody>
</table>

## Example

例えば、

- 表示する月：2ヶ月（年月はjson側で指定）
- 混雑状況として表示するアイコン：休み、○、△、×
- フッタに注釈を入れる
- 閉じるボタンには「× 閉じる」と表示

といった条件であれば、下記のような記述になります。

<pre><code>
	$("#modal").modalCal({
        open    : "#modal_open",
        month   : 2,
        icon: ["休み", "○", "△", "×"],
        footer  : "&lt;ul&gt;&lt;li&gt;○ → 比較的空いています&lt;/li&gt;&lt;li&gt;△ → 混雑が予想されます&lt;/li&gt;&lt;li&gt;× → 大変な混雑が予想されます&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;※過去の実績から予想したものですので、実際の混雑状況と異なる場合があります。&lt;/p&gt;",
        close  : "× 閉じる" //閉じるボタンの文字
    });
</code></pre>

最後に、jsonファイルです。jsonの所在（パス）とファイル名は、上記スクリプトのdataパラメータで指定します。

<pre><code>
{
    "201610" : { //年月。yyyyMMの形で記述してください
        "6": "大", //日付と状況。どちらもダブルクォーテーションでくくってください。状況は上記スクリプトのflagの内容と合わせてください。
        "10": "休"
    }
}
</code></pre>

基本的な使い方は以上です。  
応用として、

- 2016年10月と2016年11月の2ヶ月間を表示
- 10/6は大変混雑、10/10は休み
- 11/3・11/23は休み、11/4・11/24は大変混雑

という条件であれば、下記のような記述になります。

<pre><code>
{
    "201610" : {
        "6": "大",
        "10": "休"
    },
    "201611" : {
        "3": "休",
        "04": "大",
        "23": "休",
        "24": "大"
    }
}
</code></pre>

なお、2ヶ月間表示の場合は上記スクリプトのmonthパラメータに2を指定してください。  
また、上例の通り、1桁の日付は"4"でも"04"でも（混在しても）大丈夫です。  
各日付ごとに状況を設定する必要がなくても、年月の指定のためにjsonは必要です。その場合は、下記のようにキー部に年月を記述したjsonを用意してください。

<pre><code>
{
    "201610" : {
    }
}
</code></pre>

## License

<a href="https://github.com/arm-band/mocalf/blob/master/LICENSE">MIT License</a>

## Author

アルム＝バンド

## Published Date

2016/10/06

- ver 1.0